<!DOCTYPE html>
<html lang="en" class="text-[18px] scroll-p-[120px]">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
      The elixir-tools Update Vol. 3 | elixir-tools
    </title>

    <link rel="stylesheet" href="/css/site.css">

  </head>

  <body class="font-sans dark:bg-gradient-to-br dark:from-zinc-950 dark:via-zinc-900 dark:bg-zinc-900 dark:text-white">
    <div id="the-universe">
      <header class="top-0 sticky z-10 w-full bg-white dark:bg-zinc-900 mx-auto p-2 border-b-2 border-zinc-950 dark:border-white">
        <section class="container flex justify-between items-center mx-auto py-2">
          <div class="flex items-center space-x-2">
            <a href="/" class="hover:underline">
              <img src="/elixir-tools-no-background.png" class="h-8 w-8">

            </a>

            <h1 class="font-semibold text-gray-800 dark:text-white text-base lg:text-2xl ">
              <a href="/" class="no-underline hover:underline">
                elixir-tools
              </a>


            </h1>

          </div>

          <div class="flex flex-col-reverse md:flex-row items-center gap-2">

          </div>

        </section>

      </header>

      <div class="h-full">
        <main class="container mx-auto px-2">
  <article class="mx-auto max-w-4xl mb-8 pt-8">
    <div class="flex items-center justify-between">
      <h1 class="font-bold text-2xl">
        The elixir-tools Update Vol. 3
      </h1>

      <div>
        September 19, 2023
      </div>

    </div>

    <hr class="mt-4 mb-8">
    <article class="prose dark:prose-invert">
      <h2><a href="#next-ls" aria-hidden="true" class="anchor" id="next-ls"></a>Next LS</h2>
<p><a href="https://github.com/elixir-tools/next-ls">Next LS</a> has had <em>another</em> tremendous month!</p>
<p>This month was filled with <em>boring</em> infrastructure improvements as well as some awesome new features.</p>
<ul>
<li>~ 4,200 total downloads (estimated)</li>
<li>12 releases</li>
<li>5 contributors (alphabetical order)
<ul>
<li><a href="https://github.com/dvic">Damir Vandic</a></li>
<li><a href="https://github.com/sineed">Denis Tataurov</a></li>
<li><a href="https://github.com/biletskyy">Dmytro Biletskyy</a></li>
<li><a href="https://github.com/fhunleth">Frank Hunleth</a></li>
<li><a href="https://github.com/RoboZoom">RoboZoom</a></li>
</ul>
</li>
</ul>
<h2><a href="#auto-update" aria-hidden="true" class="anchor" id="auto-update"></a>Auto Update</h2>
<p>Next LS now has a built in auto update mechanism!</p>
<p>When Next LS starts up, it will check to see if there is a new version, and if there is, it downloads the appropriate release from GitHub and notifies you to restart your editor when you are ready to use the new version.</p>
<p>The editor extensions set this automatically if you don't configure a custom binary location. If you do, it assumes you are managing it yourself and won't enable the auto update process.</p>
<h2><a href="#cli-improvements" aria-hidden="true" class="anchor" id="cli-improvements"></a>CLI Improvements</h2>
<p>While you don't normally interact with the Next LS CLI, it is still a CLI tool at it's heart.</p>
<p>The CLI now has <code>--help</code> and <code>--version</code> options that work as you'd expect.</p>
<pre class="autumn highlight" style="background-color: #1F1F28; color: #DCD7BA;"><code class="language-plain-text" translate="no">Next LS v0.12.5

The language server for Elixir that just works.

     Author: Mitchell Hanberg
  Home page: https:&#x2f;&#x2f;www.elixir-tools.dev&#x2f;next-ls
Source code: https:&#x2f;&#x2f;github.com&#x2f;elixir-tools&#x2f;next-ls

nextls [flags]

FLAGS

  --stdio             Use stdio as the transport mechanism
  --port &lt;port&gt;       Use TCP as the transport mechanism, with the given port
  --help              Show help
  --version           Show nextls version
</code></pre>
<h2><a href="#symbolreference-database-improvements" aria-hidden="true" class="anchor" id="symbolreference-database-improvements"></a>Symbol/Reference Database Improvements</h2>
<p>There has been a few improvements to the symbol/reference database, which powers the Definition and References features, let's take a look!</p>
<h3><a href="#dependency-definitions" aria-hidden="true" class="anchor" id="dependency-definitions"></a>Dependency Definitions</h3>
<p>You can now follow a module or function definition into a dependency! This is useful if you quickly need to see how a dependencies function was implemented without heading to your web browser or another editor.</p>
<p>Implemented by <a href="https://github.com/dvic">Damir Vandic</a>!</p>
<h3><a href="#module-attributes" aria-hidden="true" class="anchor" id="module-attributes"></a>Module Attributes</h3>
<p>You can now follow a module attribute to its definition or find references of that attribute.</p>
<p>Implemented by <a href="https://github.com/biletskyy">Dmytro Biletskyy</a>!</p>
<h3><a href="#modules-in-alias-calls" aria-hidden="true" class="anchor" id="modules-in-alias-calls"></a>Modules in <code>alias</code> calls</h3>
<p>Modules that are arguments to the <code>alias</code> special form are now added to the references database, so you can use definition, references, and hover on them!</p>
<h2><a href="#credo-extension" aria-hidden="true" class="anchor" id="credo-extension"></a>Credo Extension</h2>
<p>We have our very first 1st party extension for a library, <a href="https://github.com/rrrene/credo">Credo</a>!</p>
<p>The Credo extension currently provides diagnostics for Credo checks. This is a subset of the features from <a href="https://github.com/elixir-tools/credo-language-server">Credo Language Server</a>, and effectively deprecates Credo Langauge Server if you are using Next LS.</p>
<p>Effort to port of the Code Actions is next.</p>
<h2><a href="#indexing-notifications" aria-hidden="true" class="anchor" id="indexing-notifications"></a>Indexing notifications</h2>
<p>If your code base is sufficiently large (maybe in the 60kloc range), your project might continue to index after it has finished compiling.</p>
<p>Index progress notifications help you know if it's still chugging along or if something is broken.</p>
<h2><a href="#workspace-symbols-improvements" aria-hidden="true" class="anchor" id="workspace-symbols-improvements"></a>Workspace Symbols Improvements</h2>
<p>Workspace Symbol queries used to be a basic regex match (internally just <code>=~</code>), but now they use a ranked fuzzy match.</p>
<p>This provides matches similar to that of the <code>fzf</code> CLI tool.</p>
<p>Implemented by <a href="https://github.com/biletskyy">Dmytro Biletskyy</a>!</p>
<h2><a href="#infrastructure-improvements" aria-hidden="true" class="anchor" id="infrastructure-improvements"></a>Infrastructure Improvements</h2>
<p>A big portion of this month was setting up a safe, automated pipeline for building and releasing the burrito binaries, along with setting up alternative methods of distribution.</p>
<h3><a href="#release-pipeline" aria-hidden="true" class="anchor" id="release-pipeline"></a>Release Pipeline</h3>
<p>In order for burrito to be able to cross compile to other OSs and architectures, it needs to be run on an Apple Silicon Mac.</p>
<p>I have an M1 MacBook Air, so in the beginning this was fine, but quickly became tedious.</p>
<p>Luckily I have GitHub sponsors (and one very generous one time sponsor!) so I was able to justify the purchase of a refurbished M2 Mac Mini.</p>
<p>I was able to cobble together the following technologies to achieve a fully automated release pipeline:</p>
<ul>
<li>M2 Mac Mini</li>
<li><a href="https://en.wikipedia.org/wiki/VLAN">VLAN</a></li>
<li><a href="https://github.com/google-github-actions/release-please-action">release-please</a></li>
<li><a href="https://github.com/actions/runner">Self hosted GitHub Actions Runner</a></li>
<li><a href="https://github.com/cirruslabs/cirrus-cli">Cirrus CLI</a></li>
<li><a href="https://github.com/cirruslabs/tart">Tart VMs</a></li>
<li><a href="https://github.com/jdx/rtx">rtx</a></li>
</ul>
<p>So basically the pipeline is:</p>
<ul>
<li>Merge code into <code>main</code></li>
<li><code>release-please-action</code> creates a new GitHub release as a draft</li>
<li>GitHub Actions kicks off the release job, which is dispatched to the runner that is running on the Mac Mini in my closet.</li>
<li>The Mac Mini is associated with its own Virtual LAN, so it can't see the rest of my home network.</li>
<li>The runner runs a private workflow that is stored in a separate repository.</li>
<li>That workflow starts a Cirrus workflow using the Cirrus CLI. The CLI boots a macOS virtual machine using <code>tart</code> and rsyncs the source code to it.</li>
<li>The <code>.cirrus.yml</code> configuration installs <code>rtx</code>, which is then used to install the appropriate Elixir and Erlang versions.</li>
<li>We run <code>mix release</code>, which generates the burrito binaries.</li>
<li>The binaries are then uploaded to the draft GitHub release.</li>
<li>The release is published! (goes from draft to published)</li>
</ul>
<p>This workflow seems to be working incredibly well! I opted to self host the Apple Silicon machine because it seemed to be the most cost effective option while still being in the GitHub Actions ecosystem.</p>
<p>Other elixir-tools projects can also use this runner to run tests on Apple Silicon (which is important, as many developers use Apple Silicon).</p>
<h3><a href="#homebrew-tap" aria-hidden="true" class="anchor" id="homebrew-tap"></a>Homebrew Tap</h3>
<p>Next LS is now available with Homebrew by our self hosted tap. Simply run <code>brew install elixir-tools/tap/next-ls</code>!</p>
<p>Currently their are pre-built bottles for amd64 Linux and amd64 macOS. Once I get the tap hooked into the new Mac Mini runner, it should be able to build arm64 macOS bottles as well.</p>
<p>I also still need to get updating the tap automated with the release pipeline.</p>
<h3><a href="#nix-flake" aria-hidden="true" class="anchor" id="nix-flake"></a>Nix Flake</h3>
<p>A <a href="https://nixos.wiki/wiki/Flakes">nix flake</a> is now included in the repository, so you can install it via Nix with <code>nix profile install github:elixir-tools/next-ls</code>.</p>
<p>This works on macOS currently, but nix running on NixOS or Linux doesn't seem to work yet. I'm still learning nix!</p>
<h2><a href="#elixir-toolsnvim-and-elixir-toolsvscode" aria-hidden="true" class="anchor" id="elixir-toolsnvim-and-elixir-toolsvscode"></a>elixir-tools.nvim and elixir-tools.vscode</h2>
<p>This month most of the updates for the editor plugins were to support new features in Next LS!</p>
<h3><a href="#nvim" aria-hidden="true" class="anchor" id="nvim"></a>Nvim</h3>
<ul>
<li>~ 4,000 clones (estimated, since last update)</li>
<li>5 releases</li>
<li>2 contributors (alphabetical order)
<ul>
<li><a href="https://github.com/andrepaes">André Luiz da Fonsêca Paes</a></li>
<li><a href="https://github.com/dvic">Damir Vandic</a></li>
</ul>
</li>
</ul>
<h3><a href="#visual-studio-code" aria-hidden="true" class="anchor" id="visual-studio-code"></a>Visual Studio Code</h3>
<ul>
<li>1,398 installs</li>
<li>3 releases</li>
<li>1 contributors (alphabetical order)
<ul>
<li><a href="https://github.com/zachallaun">Zach Allaun</a></li>
</ul>
</li>
</ul>
<h2><a href="#community" aria-hidden="true" class="anchor" id="community"></a>Community</h2>
<h3><a href="#discord" aria-hidden="true" class="anchor" id="discord"></a>Discord</h3>
<p>The discord server keeps growing!</p>
<p>We currently have 138 (30 new since the last update) members and are getting more every day, come <a href="https://discord.gg/6XdGnxVA2A">join</a> the party!</p>
<h2><a href="#thank-you" aria-hidden="true" class="anchor" id="thank-you"></a>Thank you</h2>
<p>I'd like to give a huge shout out to all of the contributors, bug reporters, and to all (27!) of my GitHub sponsors! Without the support of all of you, none of this would be possible.</p>
<h2><a href="#how-to-get-involved" aria-hidden="true" class="anchor" id="how-to-get-involved"></a>How to get involved</h2>
<p>If you'd like to get involved with elixir-tools, there are several ways:</p>
<ul>
<li>Contribute to the project via code on <a href="https://github.com/elixir-tools">GitHub</a></li>
<li>Contribute to the community via <a href="https://discord.gg/6XdGnxVA2A">Discord</a> or <a href="https://github.com/orgs/elixir-tools/discussions">GitHub</a></li>
<li>Contribute financially via <a href="https://github.com/sponsors/mhanberg">GitHub Sponsors</a></li>
</ul>
<h2><a href="#sponsors" aria-hidden="true" class="anchor" id="sponsors"></a>Sponsors</h2>
<ul>
<li><a href="https://github.com/aayushmau5">aayushmau5</a></li>
<li><a href="https://github.com/akoutmos">akoutmos</a></li>
<li><a href="https://github.com/andrepaes">andrepaes</a></li>
<li><a href="https://github.com/baldwindavid">baldwindavid</a></li>
<li><a href="https://github.com/brettwise">brettwise</a></li>
<li><a href="https://github.com/bus710">bus710</a></li>
<li><a href="https://github.com/chriscrabtree">chriscrabtree</a></li>
<li><a href="https://github.com/cigrainger">cigrainger</a></li>
<li><a href="https://github.com/clark-lindsay">clark-lindsay</a></li>
<li><a href="https://github.com/dbernheisel">dbernheisel</a></li>
<li><a href="https://github.com/dkarter">dkarter</a></li>
<li><a href="https://github.com/dvic">dvic</a></li>
<li><a href="https://github.com/dyackson">dyackson</a></li>
<li><a href="https://github.com/ethangunderson">ethangunderson</a></li>
<li><a href="https://github.com/jozuas">jozuas</a></li>
<li><a href="https://github.com/leonqadirie">leonqadirie</a></li>
<li><a href="https://github.com/mikl">mikl</a></li>
<li><a href="https://github.com/Nezteb">Nezteb</a></li>
<li><a href="https://github.com/NFIBrokerage">NFIBrokerage</a></li>
<li><a href="https://github.com/oestrich">oestrich</a></li>
<li><a href="https://github.com/PJUllrich">PJUllrich</a></li>
<li><a href="https://github.com/RudolfMan">RudolfMan</a></li>
<li><a href="https://github.com/shenaor">shenaor</a></li>
<li><a href="https://github.com/simon-wolf">simon-wolf</a></li>
<li><a href="https://github.com/sorenone">sorenone</a></li>
<li><a href="https://github.com/sorentwo">sorentwo</a></li>
<li><a href="https://github.com/zyzyva">zyzyva</a></li>
</ul>

    </article>

  </article>

</main>


      </div>

<footer id="footer" class="@container text-zinc-950 dark:text-white py-4 border-t-2 border-zinc-950 dark:border-white z-10 w-full">
  <div class="container mx-auto px-2 grid grid-cols-1 @sm:grid-cols-2 @lg:grid-cols-3 @5xl:grid-cols-4 gap-x-16 gap-y-8">
    <div>
      <h4 class="text-lg font-medium mb-2">Tools</h4>

      <ul>
        <li>
          <a href="/docs/next-ls/quickstart" class="text-zinc-950 dark:text-white hover:underline">
            Next LS
          </a>

        </li>
        <li>
          <a href="https://github.com/elixir-tools/credo-language-server" class="text-zinc-950 dark:text-white hover:underline">
            Credo Language Server
          </a>

        </li>
        <li>
          <a href="https://github.com/elixir-tools/elixir-tools.nvim" class="text-zinc-950 dark:text-white hover:underline">
            elixir-tools.nvim
          </a>

        </li>
        <li>
          <a href="https://github.com/elixir-tools/elixir-tools.vscode" class="text-zinc-950 dark:text-white hover:underline">
            elixir-tools.vscode
          </a>

        </li>
        <li>
          <a href="https://github.com/elixir-tools/gen_lsp" class="text-zinc-950 dark:text-white hover:underline">
            GenLSP
          </a>

        </li>
        <li>
          <a href="https://github.com/elixir-tools/tableau" class="text-zinc-950 dark:text-white hover:underline">
            Tableau
          </a>

        </li>

      </ul>

    </div>

    <div>
      <h4 class="text-lg font-medium mb-2">Organization</h4>

      <ul>
        <li>
          <a href="https://www.elixir-tools.dev" class="text-zinc-950 dark:text-white hover:underline">
            Website
          </a>

        </li>

        <li>
          <a href="https://github.com/elixir-tools" class="text-zinc-950 dark:text-white hover:underline">
            GitHub
          </a>

        </li>

        <li>
          <a href="https://twitter.com/elixir_tools" class="text-zinc-950 dark:text-white hover:underline">
            Twitter
          </a>

        </li>

        <li>
          <a href="https://discord.gg/6XdGnxVA2A" class="text-zinc-950 dark:text-white hover:underline">
            Discord
          </a>

        </li>

      </ul>

    </div>

    <div>
      <h4 class="text-lg font-medium mb-2">Team</h4>

      <ul>
        <li>
          <a href="https://github.com/sponsors/mhanberg" class="text-zinc-950 dark:text-white hover:underline">
            Mitchell Hanberg
          </a>

        </li>

      </ul>

    </div>

    <div>
      <h4 class="text-lg font-medium mb-2">Site</h4>

      <ul>
        <li>
          <a href="/feed.xml" class="text-zinc-950 dark:text-white hover:underline">
            RSS
          </a>

        </li>

        <li>
          <a href="https://github.com/elixir-tools/elixir-tools.dev" class="text-zinc-950 dark:text-white hover:underline">
            Source Code
          </a>

        </li>

        <li class="italic text-sm mt-2">
          <span>Built with</span>

          <a class="underline" href="https://github.com/elixir-tools/tableau">Tableau,</a>

          <a class="underline" href="https://tailwindcss.com">TailwindCSS,</a>

           and
          <span class="text-red-500">♥</span>

        </li>

      </ul>

    </div>

  </div>

</footer>

<script>
  function log(message) {
    if (true) {
      console.log(`[web_dev_utils] ${message}`)
    }
  }
  function connect() {
    try {
      window.socket = new WebSocket('wss://' + location.host + '/ws');

      window.socket.onmessage = function(e) {
        if (e.data === "reload") {
          log("reloading!");
          location.reload();
        } else if (e.data === "subscribed") {
          log("connected and subscribed!");
        }
      }

      window.socket.onopen = () => {
        waitForConnection(() => {
          log("sending 'subscribe' message");
          window.socket.send("subscribe")
        }
        , 300);
      };

      window.socket.onclose = () => {
        setTimeout(() => connect(), 500);
      };

      function waitForConnection(callback, interval) {
        log("waiting for connection!")
        if (window.socket.readyState === 1) {
          callback();
        } else {
          log("setting a timeout")
          setTimeout(() => waitForConnection(callback, interval), interval);
        }
      }
    } catch (e) {
      log(e);
      setTimeout(() => connect(), 500);
    }
  }

  log("about to connect");
  connect();
</script>
      <script async defer src="https://buttons.github.io/buttons.js"></script>

    </div>

  </body>

</html>

